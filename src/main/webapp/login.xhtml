<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
        "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:f="http://xmlns.jcp.org/jsf/core"
      lang="es" xml:lang="es">
<h:head>
    <title>Comidas - Iniciar Sesión</title>
    <meta http-equiv="Content-Type" content="application/xhtml+xml; charset=UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <style type="text/css">
        /* Reset básico */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        /* ... (otros estilos se mantienen igual) ... */
    </style>
</h:head>

<h:body>
    <div class="auth-container">
        <div class="auth-card">
            <h1 class="auth-title">Iniciar Sesión</h1>

            <h:form id="loginForm" styleClass="auth-form">
                <h:messages globalOnly="true" styleClass="error-message" />

                <div class="form-group">
                    <h:outputLabel for="email" value="Correo electrónico" />
                    <h:inputText id="email" value="#{authController.email}"
                                 required="true" requiredMessage="El correo es obligatorio"
                                 validatorMessage="Correo electrónico inválido">
                        <f:validateRegex pattern="^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$" />
                    </h:inputText>
                    <h:message for="email" styleClass="error-message" />
                </div>

                <div class="form-group password-field-group">
                    <h:outputLabel for="password" value="Contraseña" />
                    <h:inputSecret id="password" value="#{authController.password}"
                                   required="true" requiredMessage="La contraseña es obligatoria" />
                    <h:message for="password" styleClass="error-message" />
                    <h:link outcome="forgot-password" value="¿Olvidaste tu contraseña?"
                            styleClass="forgot-password" />
                </div>

                <h:commandButton value="Ingresar" action="#{authController.login}"
                                 styleClass="auth-button" />
            </h:form>

            <div class="auth-footer">
                <p>
                    ¿No tienes una cuenta? <h:link outcome="registro" value="Regístrate aquí" />
                </p>
            </div>
        </div>
    </div>

    <!-- Modal para mensajes -->
    <h:panelGroup rendered="#{authController.showModal}">
        <div class="modal">
            <div class="modal-content">
                <span class="close-btn" onclick="#{authController.hideModal()}">×</span>
                <h2>#{authController.modalTitle}</h2>
                <p>#{authController.modalMessage}</p>
                <h:commandButton value="Aceptar" action="#{authController.hideModal}"
                                 styleClass="auth-button" />
            </div>
        </div>
    </h:panelGroup>
</h:body>
</html>