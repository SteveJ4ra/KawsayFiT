<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
        "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:f="http://xmlns.jcp.org/jsf/core"
      lang="es" xml:lang="es">
<h:head>
    <title>Personaliza tu Objetivo</title>
    <meta http-equiv="Content-Type" content="application/xhtml+xml; charset=UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <style type="text/css">
        /* ... (todos los estilos CSS se mantienen igual) ... */
    </style>
</h:head>

<h:body>
    <div class="container">
        <h1>Personaliza tu objetivo</h1>
        <p class="subtitle">Último paso para conocer tus calorías y macronutrientes</p>

        <h:form id="goalCustomizationForm">
            <!-- Fecha de nacimiento -->
            <div class="input-group">
                <h:outputLabel for="birthdate" value="Fecha de nacimiento" />
                <h:inputText id="birthdate" value="#{goalController.user.birthdate}"
                             type="date" styleClass="form-control"
                             required="true" requiredMessage="La fecha de nacimiento es obligatoria">
                    <f:convertDateTime pattern="yyyy-MM-dd" />
                </h:inputText>
                <h:message for="birthdate" styleClass="error-message" />
            </div>

            <!-- Género -->
            <div class="input-group">
                <h:outputLabel for="gender" value="Género" />
                <h:selectOneMenu id="gender" value="#{goalController.user.gender}"
                                 styleClass="form-select" required="true"
                                 requiredMessage="Por favor selecciona tu género">
                    <f:selectItem itemValue="" itemLabel="Seleccionar" />
                    <f:selectItem itemValue="masculino" itemLabel="Masculino" />
                    <f:selectItem itemValue="femenino" itemLabel="Femenino" />
                    <f:selectItem itemValue="otro" itemLabel="Prefiero no decirlo" />
                </h:selectOneMenu>
                <h:message for="gender" styleClass="error-message" />
            </div>

            <!-- Peso actual -->
            <div class="input-group">
                <h:outputLabel for="currentWeight" value="Peso actual" />
                <div class="input-with-unit">
                    <h:inputText id="currentWeight" value="#{goalController.user.currentWeight}"
                                 styleClass="input-value" required="true"
                                 requiredMessage="El peso actual es obligatorio"
                                 converterMessage="Debe ser un número válido">
                        <f:validateDoubleRange minimum="30" maximum="200" />
                    </h:inputText>
                    <span class="unit">kg</span>
                </div>
                <h:message for="currentWeight" styleClass="error-message" />
            </div>

            <!-- Peso objetivo -->
            <div class="input-group">
                <h:outputLabel for="targetWeight" value="Peso objetivo" />
                <h:selectOneMenu id="targetWeight" value="#{goalController.user.targetWeight}"
                                 styleClass="form-select" required="true"
                                 requiredMessage="Por favor selecciona tu peso objetivo">
                    <f:selectItems value="#{goalController.weightOptions}" var="weight"
                                   itemValue="#{weight}" itemLabel="#{weight} kg" />
                </h:selectOneMenu>
                <h:message for="targetWeight" styleClass="error-message" />
            </div>

            <!-- Velocidad -->
            <div class="input-group">
                <h:outputLabel value="Velocidad" />
                <h:selectOneRadio id="speed" value="#{goalController.user.speed}"
                                  layout="pageDirection" styleClass="speed-options">
                    <f:selectItem itemValue="lento" itemLabel="Lento" />
                    <f:selectItem itemValue="moderado" itemLabel="Moderado" />
                    <f:selectItem itemValue="rapido" itemLabel="Rápido" />
                </h:selectOneRadio>
            </div>

            <h:commandButton value="Crear mi Plan" action="#{goalController.createPlan}"
                             styleClass="next-button" />
        </h:form>
    </div>
</h:body>
</html>